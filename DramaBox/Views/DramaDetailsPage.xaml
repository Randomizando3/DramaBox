<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="DramaBox.Views.DramaDetailsPage"
    Title="Detalhes"
    BackgroundColor="{StaticResource Bg}">

    <Grid RowDefinitions="Auto,*" Padding="16" RowSpacing="12">

        <Frame BackgroundColor="{StaticResource Card}"
               CornerRadius="18"
               Padding="12"
               HasShadow="False">

            <Grid ColumnDefinitions="90,*" ColumnSpacing="12">
                <Image x:Name="Cover"
                       Aspect="AspectFill"
                       HeightRequest="90"
                       WidthRequest="90" />

                <VerticalStackLayout Grid.Column="1" Spacing="4">
                    <Label x:Name="TitleLbl"
                           FontAttributes="Bold"
                           FontSize="18" />

                    <Label x:Name="GenreLbl"
                           TextColor="{StaticResource Muted}"
                           FontSize="12" />

                    <Label x:Name="SynLbl"
                           TextColor="{StaticResource Muted}"
                           FontSize="12"
                           MaxLines="3" />
                </VerticalStackLayout>
            </Grid>

        </Frame>

        <CollectionView x:Name="Episodes"
                        Grid.Row="1"
                        SelectionMode="Single"
                        SelectionChanged="OnSelectEp">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BackgroundColor="{StaticResource Card}"
                           CornerRadius="18"
                           Padding="12"
                           Margin="0,0,0,12"
                           HasShadow="False">

                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                            <Frame BackgroundColor="#2A2A3E"
                                   CornerRadius="14"
                                   Padding="10"
                                   HasShadow="False">
                                <Label Text="{Binding Number}"
                                       FontAttributes="Bold" />
                            </Frame>

                            <VerticalStackLayout Grid.Column="1" Spacing="2">
                                <Label Text="{Binding Title}"
                                       FontAttributes="Bold" />
                                <Label Text="{Binding DurationSec}"
                                       TextColor="{StaticResource Muted}"
                                       FontSize="12" />
                            </VerticalStackLayout>
                        </Grid>

                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>
</ContentPage>
